// é®ç½©å±‚è¿›å…¥æŒ‰é’®
document.getElementById("enter-btn").addEventListener("click", () => {
  const overlay = document.getElementById("overlay");
  overlay.style.transition = "opacity 2s ease";
  overlay.style.opacity = "0";
  setTimeout(() => overlay.style.display = "none", 2000);

  // è¿›å…¥æ—¶å¼€å§‹æ’­æ”¾éŸ³ä¹
  playRandomMusic();
});

// ğŸµ éŸ³ä¹æ’­æ”¾æ§åˆ¶
const bgm = document.getElementById("bgm");

const musicList = [
  "music/bgm1.mp3",
  "music/bgm2.mp3",
  "music/bgm3.mp3"
];

let currentIndex = -1;

function playRandomMusic() {
  let newIndex;
  do {
    newIndex = Math.floor(Math.random() * musicList.length);
  } while (newIndex === currentIndex && musicList.length > 1);

  currentIndex = newIndex;
  bgm.src = musicList[currentIndex];
  bgm.play().catch(err => {
    console.log("æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½éœ€è¦ç”¨æˆ·äº¤äº’", err);
  });
}

// æ’­æ”¾ç»“æŸåè‡ªåŠ¨æ¢æ›²
bgm.addEventListener("ended", playRandomMusic);

// ğŸŒ¸ æ¨±èŠ±é£˜è½æ•ˆæœ
function createSakura() {
  const sakura = document.createElement("div");
  sakura.classList.add("sakura");

  sakura.style.left = Math.random() * 100 + "vw";
  sakura.style.animationDuration = (Math.random() * 3 + 5) + "s";
  sakura.style.opacity = Math.random();

  document.body.appendChild(sakura);
  setTimeout(() => sakura.remove(), 8000);
}

setInterval(createSakura, 300);

// ğŸµ ç‚¹å‡»æ–‡å­—åˆ‡æ¢éŸ³ä¹
document.querySelector(".music-control").addEventListener("click", playRandomMusic);
